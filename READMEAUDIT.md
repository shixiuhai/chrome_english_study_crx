# 英语单词学习助手 Chrome 扩展 - 需求文档

## 1. 系统概述
- **目标**：帮助用户快速翻译、收藏和管理网页中的英文单词
- **技术栈**：Chrome扩展(Manifest V3)、DOM操作、语音合成API
- **主要功能**：
  - 划词翻译：下划线标记+悬浮翻译
  - 单词本管理：添加/删除/编辑单词
  - 发音功能：单词发音支持

## 2. 功能模块
### 2.1 内容脚本 (content.js)
- 划词选中识别
- 文本标记与样式管理
- 翻译结果显示
- 点击交互(删除标记)

### 2.2 单词本 (popup.js)
- 单词列表展示
- 单词搜索过滤
- 编辑/删除功能
- 发音功能(TTS+API音频)

## 3. 数据流程
```mermaid
graph TB
    A[用户选中文本] --> B[content.js 标记文本]
    B --> C{是否添加到单词本}
    C -->|是| D[保存到chrome.storage]
    C -->|否| E[仅临时标记]
```

## 4. 技术规范
- **权限**：storage, activeTab, notifications
- **API端点**：
  - 词典API: https://api.dictionaryapi.dev/
  - 音频资源: https://60s.viki.moe/

## 5. 已知问题
- 已修复：下划线移除时翻译文本错误问题
- 待优化：长文本选中的性能问题